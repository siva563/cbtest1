<!DOCTYPE html>
<html>
<head>
    <title>Dynamic Table with Multiple Filters</title>
    <style>
        table {
            border-collapse: collapse;
            width: 80%;
            margin: auto;
            text-align: left;
        }
        th, td {
            border: 1px solid black;
            padding: 10px;
        }
        th {
            background-color: #f2f2f2;
        }
        #filter-container {
            text-align: center;
            margin-bottom: 20px;
        }
        select, input[type="text"], input[type="radio"] {
            padding: 5px;
            font-size: 16px;
            margin-right: 10px;
        }
        .checkbox {
            display: flex;
            align-items: center;
        }
        .checkbox span {
            margin-left: 5px;
        }
    </style>
</head>
<body>
    <h1 id="myh1tags">To-Do List</h1>
    
    <!-- Filter Container -->
    <div id="filter-container">
        <label for="userFilter">Filter by User ID: </label>
        <select id="userFilter">
            <option value="all">All</option>
        </select>

        <label for="idFilter">Filter by ID: </label>
        <input type="text" id="idFilter" placeholder="Enter ID" />

        <label for="titleFilter">Filter by Title: </label>
        <input type="text" id="titleFilter" placeholder="Enter Title" />

        <label for="completedFilter">Completed: </label>
        <input type="radio" name="completed" id="completedTrue" value="true" /> Yes
        <input type="radio" name="completed" id="completedFalse" value="false" /> No
        <input type="radio" name="completed" id="completedAll" value="all" checked /> All
    </div>
    
    <div id="output"></div>

    <script>
        let mydata;

        // Fetch data from API
        function getData() {
            fetch("https://jsonplaceholder.typicode.com/todos")
                .then(response => response.json())
                .then(data => {
                    mydata = data;
                    populateDropdown();
                    createTable(); // Show all data initially
                })
                .catch(error => console.error("Error fetching data:", error));
        }

        // Populate dropdown with unique user IDs
        function populateDropdown() {
            const dropdown = document.getElementById("userFilter");
            const userIds = [...new Set(mydata.map(item => item.userId))]; // Unique user IDs
            userIds.forEach(userId => {
                const option = document.createElement("option");
                option.value = userId;
                option.textContent = userId;
                dropdown.appendChild(option);
            });

            // Add event listeners for filters
            document.getElementById("userFilter").addEventListener("change", applyFilters);
            document.getElementById("idFilter").addEventListener("input", applyFilters);
            document.getElementById("titleFilter").addEventListener("input", applyFilters);
            document.getElementsByName("completed").forEach(radio => {
                radio.addEventListener("change", applyFilters);
            });
        }

        // Create table based on filters
        function createTable(filteredData = mydata) {
            const output = document.getElementById("output");
            output.innerHTML = ""; // Clear previous table

            const table = document.createElement("table");
            const headerRow = document.createElement("tr");
            const headers = ["User ID", "ID", "Title", "Completed"];
            headers.forEach(headerText => {
                const th = document.createElement("th");
                th.textContent = headerText;
                headerRow.appendChild(th);
            });
            table.appendChild(headerRow);

            // Populate rows
            filteredData.forEach(item => {
                const row = document.createElement("tr");

                const userIdCell = document.createElement("td");
                userIdCell.textContent = item.userId;
                row.appendChild(userIdCell);

                const idCell = document.createElement("td");
                idCell.textContent = item.id;
                row.appendChild(idCell);

                const titleCell = document.createElement("td");
                titleCell.textContent = item.title;
                row.appendChild(titleCell);

                const completedCell = document.createElement("td");
                const checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                checkbox.disabled = true;
                checkbox.checked = item.completed;

                const checkboxLabel = document.createElement("span");
                checkboxLabel.textContent = item.completed ? "✔" : "✖";

                const checkboxWrapper = document.createElement("div");
                checkboxWrapper.classList.add("checkbox");
                checkboxWrapper.appendChild(checkbox);
                checkboxWrapper.appendChild(checkboxLabel);

                completedCell.appendChild(checkboxWrapper);
                row.appendChild(completedCell);

                table.appendChild(row);
            });

            output.appendChild(table);
        }

        // Apply all filters
        function applyFilters() {
            let filteredData = mydata;

            // Filter by user ID
            const userFilter = document.getElementById("userFilter").value;
            if (userFilter !== "all") {
                filteredData = filteredData.filter(item => item.userId == userFilter);
            }

            // Filter by ID
            const idFilter = document.getElementById("idFilter").value.trim();
            if (idFilter) {
                filteredData = filteredData.filter(item => item.id.toString().includes(idFilter));
            }

            // Filter by Title
            const titleFilter = document.getElementById("titleFilter").value.trim().toLowerCase();
            if (titleFilter) {
                filteredData = filteredData.filter(item => item.title.toLowerCase().includes(titleFilter));
            }

            // Filter by Completed
            const completedFilter = document.querySelector('input[name="completed"]:checked').value;
            if (completedFilter !== "all") {
                const isCompleted = completedFilter === "true";
                filteredData = filteredData.filter(item => item.completed === isCompleted);
            }

            createTable(filteredData);
        }

        // Fetch data on page load
        getData();
    </script>
</body>
</html>
